---
import { SectionTitle } from "./UI";
import { ComputersCanvas } from ".";
---

<section id="about" class="w-full bg-background relative">
    <div class="px-6 py-4 pt-14">
        <SectionTitle
            title="About Me"
            color="primary"
        >
            <div class="w-full h-[550px] animated-gradient hidden lg:block">
                <!-- This wrapper is the key to fixing the stacking bug -->
                <div class="canvas-wrapper">
                    <ComputersCanvas client:visible />
                </div>
            </div>

            <div class="px-6 py-4">
                <div
                    class="Fade_Up w-full md:w-[80%] lg:w-[80%] flex justify-center items-start flex-col gap-4 py-8 mx-auto"
                >
                    <h2 class="Fade_Up text-[1.5em] font-bold">Hey there! üëãüèª</h2>
                    <p class="Fade_Up text-justify">
                        I'm Kiernan, a <span class="gradientText">Senior Software Engineer</span> with extensive experience in <span class="gradientText">architecting and implementing scalable, high-performance web applications</span>.
                    </p>
                    <p class="Fade_Up text-justify">
                        I specialize in engineering <span class="gradientText">sophisticated and responsive user interfaces</span> utilizing modern frameworks like React and Astro. My focus is on building robust, component-driven architectures and optimizing for performance across a spectrum of projects, from enterprise-level platforms to mission-critical systems.
                    </p>
                    <p class="Fade_Up text-justify">
                        I am eager to collaborate with forward-thinking teams to tackle complex engineering challenges. Let's connect and build something exceptional.
                    </p>
                </div>
            </div>
        </SectionTitle>
    </div>
</section>

<style>
    .animated-gradient {
        position: relative;
        overflow: hidden;
    }

    /* This wrapper is the key to fixing the stacking bug */
    .canvas-wrapper {
        position: relative;
        z-index: 1;
        height: 100%;
    }

    /* This makes the Astro component fill the wrapper */
    .canvas-wrapper > * {
        height: 100%;
    }

    .animated-gradient::before,
    .animated-gradient::after {
        content: '';
        position: absolute;
        z-index: 0; /* Explicitly behind the canvas-wrapper */
        top: 50%;
        left: 50%;
        width: 100vh;
        padding-bottom: 100vh;
        border-radius: 50%;
        transform: translate(-50%, -50%);
        background-repeat: no-repeat;
    }

    .animated-gradient::before {
        background-image: radial-gradient(ellipse at center, hsl(var(--primary)) 0%, transparent 40%);
        animation: pulse1 12s ease-in-out infinite;
    }

    .animated-gradient::after {
        background-image: radial-gradient(ellipse at center, hsl(var(--secondary)) 0%, transparent 40%);
        animation: pulse2 12s ease-in-out infinite;
        opacity: 0;
    }

    @keyframes pulse1 {
        0%, 100% {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }
        50% {
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.95);
        }
    }

    @keyframes pulse2 {
        0%, 100% {
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.95);
        }
        50% {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }
    }

    /* DEFINITIVE FIX FOR GRADIENT TEXT */
    .gradientText {
        background: var(--gradient);
        background-clip: text;
        -webkit-background-clip: text;
        color: transparent;
        background-size: 200%;
        animation: gradientPan 5s linear infinite;
        will-change: background-position;
    }

    @keyframes gradientPan {
        from {
            background-position: 0% center;
        }
        to {
            background-position: -200% center;
        }
    }
</style>

<style>
    .gradientText {
        color: hsl(var(--primary));
        font-weight: bold;
    }
</style>

